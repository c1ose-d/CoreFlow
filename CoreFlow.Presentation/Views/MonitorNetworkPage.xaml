<Page
    x:Class="CoreFlow.Presentation.Views.MonitorNetworkPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:shared="clr-namespace:CoreFlow.Presentation.Resources.Styles.Shared"
    xmlns:viewmodels="clr-namespace:CoreFlow.Presentation.ViewModels"
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance viewmodels:MonitorNetworkPageViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    Title="Сетевая доступность"
    Loaded="Page_Loaded" >
    <Border
        Padding="33,0" >
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition
                    Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <TextBlock
                Margin="3,0,3,36"
                Text="{Binding Title, RelativeSource={RelativeSource AncestorType=Page}}"
                Style="{DynamicResource TitleTextBlockStyle}" />
            <ListView
                Grid.Row="1"
                ItemsSource="{Binding ServerBlockResultDtos}"
                ItemContainerStyle="{DynamicResource ListView.ListItem.ContentOnly.Pointer}"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                Style="{DynamicResource ListView}" >
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Expander
                            Content="{Binding Servers}"
                            Header="{Binding Name}"
                            IsExpanded="{Binding IsExpanded, Mode=TwoWay}"
                            Style="{StaticResource Expander.WrapPanel}" >
                            <shared:ExpanderProperties.WrapPanelDataTemplate>
                                <DataTemplate>
                                    <Border
                                        CornerRadius="{DynamicResource ControlCornerRadius}"
                                        Margin="3"
                                        Padding="8" >
                                        <Border.Style>
                                            <Style
                                                TargetType="{x:Type Border}" >
                                                <Setter
                                                    Property="Background"
                                                    Value="{DynamicResource SystemFillColorSuccessBackgroundBrush}" />
                                                <Style.Triggers>
                                                    <DataTrigger
                                                        Binding="{Binding IsAlive}"
                                                        Value="False" >
                                                        <Setter
                                                            Property="Background"
                                                            Value="{DynamicResource SystemFillColorCriticalBackgroundBrush}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <TextBlock
                                            Text="{Binding DisplayName}"
                                            TextAlignment="Center" >
                                            <TextBlock.Style>
                                            <Style
                                                BasedOn="{StaticResource BodyTextBlockStyle}"
                                                TargetType="{x:Type TextBlock}" >
                                                <Setter
                                                    Property="Foreground"
                                                    Value="{DynamicResource SystemFillColorSuccessBrush}" />
                                                <Style.Triggers>
                                                    <DataTrigger
                                                        Binding="{Binding IsAlive}"
                                                        Value="False" >
                                                        <Setter
                                                            Property="Foreground"
                                                            Value="{DynamicResource SystemFillColorCriticalBrush}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                        </TextBlock>
                                    </Border>
                                </DataTemplate>
                            </shared:ExpanderProperties.WrapPanelDataTemplate>
                        </Expander>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </Border>
</Page>