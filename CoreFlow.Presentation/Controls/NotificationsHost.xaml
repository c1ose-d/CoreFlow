<UserControl
    x:Class="CoreFlow.Presentation.Controls.NotificationsHost"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:CoreFlow.Presentation.Controls"
    xmlns:services="clr-namespace:CoreFlow.Presentation.Services"
    xmlns:viewmodels="clr-namespace:CoreFlow.Presentation.ViewModels"
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance viewmodels:MainWindowViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800" >
    <ItemsControl
        ItemsSource="{Binding NotificationMessages}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel
                    HorizontalAlignment="Right"
                    Margin="0,0,16,16"
                    Orientation="Vertical"
                    VerticalAlignment="Bottom" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate
                DataType="{x:Type services:NotificationMessage}" >
                <Border
                    x:Name="Border"
                    CornerRadius="{DynamicResource ControlCornerRadius}"
                    MaxHeight="50"
                    MaxWidth="600"
                    MinHeight="50"
                    MinWidth="600"
                    Margin="0,16,0,0" >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition
                                Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Border
                            x:Name="Badge"
                            CornerRadius="8"
                            Height="16"
                            Margin="16,0,0,0"
                            VerticalAlignment="Center"
                            Width="16" >
                            <TextBlock
                                x:Name="BadgeGlyph"
                                FontFamily="{DynamicResource SegoeFluentIcons}"
                                FontSize="12"
                                Foreground="{DynamicResource TextOnAccentFillColorPrimaryBrush}"
                                HorizontalAlignment="Center"
                                LineHeight="16"
                                Margin="0,4,0,0"
                                VerticalAlignment="Center" />
                        </Border>
                        <TextBlock
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Grid.Column="1"
                            Margin="16,0,0,0"
                            Style="{DynamicResource BodyStrongTextBlockStyle}"
                            Text="{Binding Title}"
                            VerticalAlignment="Center" />
                        <TextBlock
                            Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                            Grid.Column="2"
                            Margin="16,0,0,0"
                            Style="{DynamicResource BodyTextBlockStyle}"
                            Text="{Binding Body}"
                            VerticalAlignment="Center" />
                    </Grid>
                </Border>
                <DataTemplate.Triggers>
                    <DataTrigger
                        Binding="{Binding NotificationType}"
                        Value="Success" >
                        <Setter 
                            TargetName="Border"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorSuccessBackgroundBrush}" />
                        <Setter 
                            TargetName="Badge"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorSuccessBrush}" />
                        <Setter
                            TargetName="BadgeGlyph"
                            Property="Text"
                            Value="&#xE73E;" />
                    </DataTrigger>
                    <DataTrigger
                        Binding="{Binding NotificationType}"
                        Value="Caution" >
                        <Setter 
                            TargetName="Border"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorCautionBackgroundBrush}" />
                        <Setter 
                            TargetName="Badge"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorCautionBrush}" />
                        <Setter
                            TargetName="BadgeGlyph"
                            Property="Text"
                            Value="&#xEDB1;" />
                    </DataTrigger>
                    <DataTrigger
                        Binding="{Binding NotificationType}"
                        Value="Critical" >
                        <Setter 
                            TargetName="Border"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorCriticalBackgroundBrush}" />
                        <Setter 
                            TargetName="Badge"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorCriticalBrush}" />
                        <Setter
                            TargetName="BadgeGlyph"
                            Property="Text"
                            Value="&#xEDAE;" />
                    </DataTrigger>
                    <DataTrigger
                        Binding="{Binding NotificationType}"
                        Value="Attention" >
                        <Setter 
                            TargetName="Border"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorAttentionBackgroundBrush}" />
                        <Setter 
                            TargetName="Badge"
                            Property="Background"
                            Value="{DynamicResource SystemFillColorAttentionBrush}" />
                        <Setter
                            TargetName="BadgeGlyph"
                            Property="Text"
                            Value="&#xEDAD;" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</UserControl>